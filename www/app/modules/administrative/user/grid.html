<div class="grid-view">
  <div class="os-grid-header col-xs-12">
    <div class="col-xs-4" ng-click="sortBy('u.firstName', $event); name = !name">
      <span class="u.firstName" translate="user.name">Name</span>
    </div>
    <div class="col-xs-4" ng-click="sortBy('u.loginName', $event); loginName = !loginName">
      <span class="u.loginName" translate="user.email_address">Email Address</span>
    </div>
    <!-- TODO : lastLogin is not part of User summary, So commenting for now-->
    <!--div class="col-xs-2" ng-click="sortBy('u.lastLogin', $event); lastLogin = !lastLogin">
      <span class="u.lastLogin" translate="user.tooltip.last_login">Last Login</span>
    </div-->
    <div class="col-xs-2">
      <span translate="user.cp_count">CPs</span>
    </div>
    <div class="col-xs-2" ng-click="sortBy('u.creationDate', $event); creationDate = !creationDate">
      <span class="u.creationDate" translate="user.tooltip.user_since">Creation Date</span>
    </div>
  </div>

  <div ng-class="{'os-rows': list.length > 20}">
    <div class="os-grid-row col-xs-12" ng-repeat="user in list"  ng-click="showDetail(user)">
      <div class="col-xs-4 value">
        <a ui-sref="user-detail-overview({userId:user.id})">{{user | osUserDisplayName}}</a>
      </div>
      <div class="col-xs-4 value">
        <span title="{{'user.email_address' | translate}}">{{user.emailAddress}}</span>
      </div>
      <!-- TODO : lastLogin is not part of User summary, So commenting for now-->
      <!--div class="col-xs-2 value">
        <span>{{user.lastLogin}}</span>
      </div-->
      <div class="col-xs-2 value">
        <span>{{(user.cpCount || 0 )| number: 0}}</span>
      </div>
      <div class="col-xs-2 value">
        <span ng-if="!!user.creationDate">
            {{user.creationDate | date: 'yyyy'}}
        </span>
        <span ng-if="!user.creationDate" translate="common.na"></span>
      </div>
      <div ng-include="'more_button.html'"></div>
    </div>
  </div>
</div>

<div os-right-drawer ng-include="'modules/administrative/user/search.html'"></div>

<script type="text/ng-template" id="more_button.html">
  <div dropdown class="grid-dropdown">
    <button class="dropdown-toggle pull-right" aria-haspopup="true" aria-expanded="false"
      ng-click="$event.stopPropagation()">
      <span class="fa fa-ellipsis-v"></span>
    </button>
    <ul class="dropdown-menu pull-right" role="menu">
      <li>
        <a ng-click="showDetail(user)">
          <i class="fa fa-eye"></i>
          <span translate="common.buttons.view">View</span>
        </a>
      </li>
      <li show-if-allowed="userResource.updateOpts">
        <a ui-sref="user-addedit({userId: user.id})">
          <i class="fa fa-pencil"></i>
          <span translate="common.buttons.edit">Edit</span>
        </a>
      </li>
      <li show-if-allowed="userResource.deleteOpts" ng-click="$event.stopPropagation()">
        <a ng-click="deleteObj(user)">
          <span class="fa fa-trash"></span>
          <span translate="common.buttons.delete">Delete</span>
        </a>
      </li>
    </ul>
  </div>
</script>

