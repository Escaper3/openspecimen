<div class="grid-view">
  <div class="os-grid-header col-xs-12">
    <div class="col-xs-4" ng-click="sortBy('shortTitle', $event); shortTitle = !shortTitle">
      <span class="shortTitle" translate="cp.short_title">Short Title</span>
    </div>
    <div class="col-xs-3" ng-click="sortBy('pi.firstName', $event); pi = !pi">
      <span class="pi.firstName" translate="cp.pi">Principal Investigator</span>
    </div>
    <div class="col-xs-2" ng-click="sortBy('startDate', $event); startDate = !startDate">
      <span class="startDate" translate="cp.start_date">Start Date</span>
    </div>
    <div class="col-xs-2">
      <span translate="cp.participant_count">Participants</span>
    </div>
    <div class="col-xs-1">
      <span translate="cp.specimen_count">Specimen Count</span>
    </div>
  </div>

  <div ng-class="{'os-rows': list.length > 20}">
    <div class="os-grid-row col-xs-12" ng-repeat="cp in list" ng-click="showDetail(cp)">
      <div class="col-xs-4 value">
        <a ui-sref="participant-list({cpId: cp.id})">{{cp.shortTitle}}</a>
      </div>
      <div class="col-xs-3 value">
        <span title="{{cp.principalInvestigator.firstName}} {{cp.principalInvestigator.lastName}}">
          {{cp.principalInvestigator.firstName}} {{cp.principalInvestigator.lastName}}
        </span>
      </div>
      <div class="col-xs-2 value">
        <span>{{cp.startDate | date: global.dateFmt}}</span>
      </div>
      <div class="col-xs-2 value">
        <span>{{cp.participantCount | number: 0}}</span>
      </div>
      <div class="col-xs-1 value">
        <span>{{cp.specimenCount | number: 0}}</span>
      </div>
      <div ng-include="'more_button.html'"></div>
    </div>
  </div>
</div>

<div os-right-drawer ng-include="'modules/biospecimen/cp/search.html'"></div>

<script type="text/ng-template" id="more_button.html">
  <div dropdown class="grid-dropdown">
    <button class="dropdown-toggle" aria-haspopup="true" aria-expanded="false"
      ng-click="$event.stopPropagation()">
      <span class="fa fa-ellipsis-v"></span>
    </button>
    <ul class="dropdown-menu pull-right" role="menu">
      <li>
        <a ui-sref="cp-detail.overview({cpId: cp.id})">
          <i class="fa fa-eye"></i>
          <span translate="common.buttons.view">View</span>
        </a>
      </li>
      <li show-if-allowed="specimenResource.updateOpts">
        <a ui-sref="cp-addedit({cpId:cp.id})">
          <i class="fa fa-pencil"></i>
          <span translate="common.buttons.edit">Edit</span>
        </a>
      </li>
      <li show-if-allowed="participantResource.deleteOpts" ng-click="$event.stopPropagation()">
        <a ng-click="deleteObj(cp)">
          <span class="fa fa-trash"></span>
          <span translate="common.buttons.delete">Delete</span>
        </a>
      </li>
    </ul>
  </div>
</script>