<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE hibernate-mapping PUBLIC
    "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
    "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<hibernate-mapping auto-import="false">
    <class  
		name="com.krishagni.catissueplus.core.biospecimen.domain.CollectionProtocolRegistration" 
		table="CATISSUE_COLL_PROT_REG" >

        <id
            name="id"
            column="IDENTIFIER"
        >
            <generator class="native">
                <param name="sequence">CATISSUE_COLL_PROT_REG_SEQ</param>
            </generator>
        </id>

        <property
            name="consentSignatureDate"
            type="java.util.Date"
            update="true"
            insert="true"
            column="CONSENT_SIGN_DATE"
        />

        <property
            name="signedConsentDocumentURL"
            type="string"
            update="true"
            insert="true"
            column="CONSENT_DOC_URL"
            length="1000"
        />

        <set
            name="consentResponseCollection"
            table="CATISSUE_CONSENT_TIER_RESPONSE"
            inverse="true" cascade="all-delete-orphan"
        >
			<key column="COLL_PROT_REG_ID"/>
			<one-to-many class="edu.wustl.catissuecore.domain.ConsentTierResponse"/>
		</set>
        

        <many-to-one name="consentWitness"
            class="edu.wustl.catissuecore.domain.User"
            column="CONSENT_WITNESS"  
        />

        <property
            name="protocolParticipantIdentifier"
            type="string"
            column="PROTOCOL_PARTICIPANT_ID"
        />
        
        <property
            name="barcode"
            type="string"
            column="BARCODE"
	    />

        <property
            name="registrationDate"
            type="date"
            column="REGISTRATION_DATE"
        />

        <many-to-one name="participant"
            class="com.krishagni.catissueplus.core.biospecimen.domain.Participant"
            cascade="save-update"
            column="PARTICIPANT_ID"
        />

        <many-to-one
            name="collectionProtocol"
            class="edu.wustl.catissuecore.domain.CollectionProtocol"
            column="COLLECTION_PROTOCOL_ID" 
        />

        <property
            name="activityStatus"
            type="string"
            column="ACTIVITY_STATUS"
        />
        <set
            name="scgCollection"
            table="CATISSUE_SPECIMEN_COLL_GROUP"
            cascade="save-update"
        >
              <key column="COLLECTION_PROTOCOL_REG_ID"/>

              <one-to-many
                  class="com.krishagni.catissueplus.core.biospecimen.domain.SpecimenCollectionGroup"
              />
        </set>
           <property
            name="offset"
            type="int"
            column="DATE_OFFSET"
        />
    </class>
    
</hibernate-mapping>

