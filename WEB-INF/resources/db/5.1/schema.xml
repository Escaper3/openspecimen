<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
  xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
  http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd">

  <changeSet author="vpawar" id="Column specifying whether the entire import job was run in a single transaction">
    <addColumn tableName="OS_BULK_IMPORT_JOBS">
      <column name="ATOMIC" type="${boolean.type}"/>
    </addColumn>
  </changeSet>

  <changeSet author="vpawar" id="Specimen carts view">
    <createView viewName="OS_SPECIMEN_CARTS_VIEW" replaceIfExists="true">
      select
        ci.obj_id as specimen_id, c.tag_label as name, ci.identifier as item_id
      from
        catissue_specimenlist_tags c
        inner join catissue_spec_tag_items ci on ci.tag_id = c.identifier
      where
        c.deleted_on is null
    </createView>
  </changeSet>
</databaseChangeLog>
